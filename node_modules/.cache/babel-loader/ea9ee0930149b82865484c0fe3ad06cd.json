{"ast":null,"code":"import React from 'react';\nimport { API, FETCH_HEADERS } from \"../constants\";\nlet userData = {\n  id: null,\n  rol: null,\n  email: null\n};\n\nif (localStorage.getItem('user') !== null) {\n  userData = JSON.parse(localStorage.getItem('user'));\n}\n\nconst AuthContext = /*#__PURE__*/React.createContext({\n  user: userData,\n\n  updateAuthData(data) {}\n\n});\nAuthContext.displayName = \"AuthContext\";\nconst authService = {\n  async login(credenciales) {\n    const rta = await fetch(API + '/login', {\n      headers: FETCH_HEADERS,\n      method: 'post',\n      body: JSON.stringify(credenciales),\n      credentials: \"include\"\n    });\n    const respuesta = await rta.json();\n\n    if (respuesta.success) {\n      userData = respuesta.user;\n      localStorage.setItem('user', JSON.stringify(userData));\n      return { ...userData\n      };\n    }\n\n    return false;\n  },\n\n  async logout() {\n    const rta = await fetch(API + '/logout', {\n      headers: FETCH_HEADERS,\n      method: 'post',\n      credentials: \"include\"\n    });\n    const respuesta = await rta.json();\n\n    if (respuesta.success) {\n      userData = {\n        id: null,\n        rol: null,\n        email: null\n      };\n      localStorage.removeItem('user');\n      return true;\n    }\n\n    return false;\n  },\n\n  getUserData() {\n    return { ...userData\n    };\n  }\n\n};\nexport default authService;\nexport { AuthContext };","map":{"version":3,"sources":["C:/xampp/htdocs/front-andiamo/src/services/auth.js"],"names":["React","API","FETCH_HEADERS","userData","id","rol","email","localStorage","getItem","JSON","parse","AuthContext","createContext","user","updateAuthData","data","displayName","authService","login","credenciales","rta","fetch","headers","method","body","stringify","credentials","respuesta","json","success","setItem","logout","removeItem","getUserData"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,GAAR,EAAaC,aAAb,QAAiC,cAAjC;AAEA,IAAIC,QAAQ,GAAG;AACXC,EAAAA,EAAE,EAAE,IADO;AAEXC,EAAAA,GAAG,EAAE,IAFM;AAGXC,EAAAA,KAAK,EAAE;AAHI,CAAf;;AAMA,IAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,IAApC,EAA0C;AACtCL,EAAAA,QAAQ,GAAGM,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AACH;;AAGD,MAAMG,WAAW,gBAAGX,KAAK,CAACY,aAAN,CAAoB;AACpCC,EAAAA,IAAI,EAAEV,QAD8B;;AAEpCW,EAAAA,cAAc,CAACC,IAAD,EAAO,CAAE;;AAFa,CAApB,CAApB;AAMAJ,WAAW,CAACK,WAAZ,GAA0B,aAA1B;AAEA,MAAMC,WAAW,GAAG;AAEhB,QAAMC,KAAN,CAAYC,YAAZ,EAA0B;AACtB,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAACpB,GAAG,GAAG,QAAP,EAAiB;AACpCqB,MAAAA,OAAO,EAAEpB,aAD2B;AAEpCqB,MAAAA,MAAM,EAAE,MAF4B;AAGpCC,MAAAA,IAAI,EAAEf,IAAI,CAACgB,SAAL,CAAeN,YAAf,CAH8B;AAKpCO,MAAAA,WAAW,EAAE;AALuB,KAAjB,CAAvB;AAOA,UAAMC,SAAS,GAAG,MAAMP,GAAG,CAACQ,IAAJ,EAAxB;;AACA,QAAGD,SAAS,CAACE,OAAb,EAAsB;AAElB1B,MAAAA,QAAQ,GAAGwB,SAAS,CAACd,IAArB;AAEAN,MAAAA,YAAY,CAACuB,OAAb,CAAqB,MAArB,EAA6BrB,IAAI,CAACgB,SAAL,CAAetB,QAAf,CAA7B;AACA,aAAO,EAAC,GAAGA;AAAJ,OAAP;AACH;;AACD,WAAO,KAAP;AACH,GAnBe;;AAqBhB,QAAM4B,MAAN,GAAe;AACX,UAAMX,GAAG,GAAG,MAAMC,KAAK,CAACpB,GAAG,GAAG,SAAP,EAAkB;AACrCqB,MAAAA,OAAO,EAAEpB,aAD4B;AAErCqB,MAAAA,MAAM,EAAE,MAF6B;AAGrCG,MAAAA,WAAW,EAAE;AAHwB,KAAlB,CAAvB;AAKA,UAAMC,SAAS,GAAG,MAAMP,GAAG,CAACQ,IAAJ,EAAxB;;AACA,QAAGD,SAAS,CAACE,OAAb,EAAsB;AAClB1B,MAAAA,QAAQ,GAAG;AACPC,QAAAA,EAAE,EAAE,IADG;AAEPC,QAAAA,GAAG,EAAE,IAFE;AAGPC,QAAAA,KAAK,EAAE;AAHA,OAAX;AAKAC,MAAAA,YAAY,CAACyB,UAAb,CAAwB,MAAxB;AACA,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GAtCe;;AAyChBC,EAAAA,WAAW,GAAG;AACV,WAAO,EAAC,GAAG9B;AAAJ,KAAP;AACH;;AA3Ce,CAApB;AA8CA,eAAec,WAAf;AAEA,SAAQN,WAAR","sourcesContent":["import React from 'react';\r\nimport {API, FETCH_HEADERS} from \"../constants\";\r\n\r\nlet userData = {\r\n    id: null,\r\n    rol: null,\r\n    email: null\r\n};\r\n\r\nif(localStorage.getItem('user') !== null) {\r\n    userData = JSON.parse(localStorage.getItem('user'));\r\n}\r\n\r\n\r\nconst AuthContext = React.createContext({\r\n    user: userData,\r\n    updateAuthData(data) {}\r\n});\r\n\r\n\r\nAuthContext.displayName = \"AuthContext\";\r\n\r\nconst authService = {\r\n  \r\n    async login(credenciales) {\r\n        const rta = await fetch(API + '/login', {\r\n            headers: FETCH_HEADERS,\r\n            method: 'post',\r\n            body: JSON.stringify(credenciales),\r\n         \r\n            credentials: \"include\"\r\n        });\r\n        const respuesta = await rta.json();\r\n        if(respuesta.success) {\r\n        \r\n            userData = respuesta.user;\r\n           \r\n            localStorage.setItem('user', JSON.stringify(userData));\r\n            return {...userData}; \r\n        }\r\n        return false;\r\n    },\r\n\r\n    async logout() {\r\n        const rta = await fetch(API + '/logout', {\r\n            headers: FETCH_HEADERS,\r\n            method: 'post',\r\n            credentials: \"include\"\r\n        });\r\n        const respuesta = await rta.json();\r\n        if(respuesta.success) {\r\n            userData = {\r\n                id: null,\r\n                rol: null,\r\n                email: null,\r\n            };\r\n            localStorage.removeItem('user');\r\n            return true; \r\n        }\r\n        return false;\r\n    },\r\n\r\n    \r\n    getUserData() {\r\n        return {...userData};\r\n    }\r\n};\r\n\r\nexport default authService;\r\n\r\nexport {AuthContext};\r\n"]},"metadata":{},"sourceType":"module"}