{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\front-andiamo\\\\src\\\\components\\\\CargarViaje.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport viajesService from \"./../services/viajes\";\nimport Cargando from \"./Cargando\";\nimport { useHistory } from \"react-router-dom\";\nimport TextField from '@material-ui/core/TextField';\nimport * as yup from \"yup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst validateSchema = yup.object().shape({\n  /*  empresa_id: yup.number().typeError('La empresa no puede estar vacia'), */\n  salida_id: yup.number().typeError('La salida no puede estar vacia'),\n  destino_id: yup.number().typeError('El destino no puede estar vacio'),\n  fecha_salida: yup.date().typeError('La fecha de salida no puede estar vacia'),\n  fecha_llegada: yup.date().typeError('La fecha de llegada no puede estar vacia'),\n  precio: yup.number().typeError('El precio no puede estar vacio')\n});\n\nfunction CargarViaje(props) {\n  _s();\n\n  useEffect(() => {\n    (async () => {\n      const data = await viajesService.indexSelectEmpresa();\n      setViajes(data);\n      setCargando(false);\n    })().catch(err => console.log(\"Error al traer los viajes: \", err));\n  }, []);\n  const history = useHistory();\n  const ErroresTotales = {\n    empresa_id: null,\n    salida_id: null,\n    destino_id: null,\n    fecha_salida: null,\n    fecha_llegada: null,\n    cantidad_asientos: null,\n    precio: null\n  };\n  const [errores, setErrores] = useState({\n    ErroresTotales\n  });\n  const [viaje, setViajes] = useState({\n    empresa_id: \"\",\n    salida_id: \"\",\n    destino_id: \"\",\n    fecha_salida: \"\",\n    fecha_llegada: \"\",\n    cantidad_asientos: \"20\",\n    precio: \"\"\n  });\n  const [cargando, setCargando] = useState(false);\n\n  const handleChange = ev => {\n    setViajes({ ...viaje,\n      [ev.target.name]: ev.target.value\n    });\n  };\n\n  const handleSubmit = ev => {\n    ev.preventDefault();\n    validateSchema.validate(viaje, {\n      abortEarly: false\n    }).then(data => {\n      setCargando(true);\n      viajesService.store(viaje).then(rta => {\n        setViajes({\n          empresa_id: '',\n          salida_id: '',\n          destino_id: '',\n          fecha_salida: '',\n          fecha_llegada: '',\n          cantidad_asientos: '',\n          precio: ''\n        });\n        setCargando(false);\n\n        if (!rta.errors) {\n          console.log(\"Viaje creado con éxito\", rta);\n          setErrores({\n            ErroresTotales\n          });\n        } else {\n          setErrores(rta.errors);\n        }\n\n        if (typeof props.notExitosa === \"function\") {\n          props.notExitosa({ ...rta.data\n          });\n        }\n\n        history.push('/viajes');\n      }).catch(e => console.error('Error al crear el viaje'));\n    }).catch(err => {\n      console.log(\"Error de validacion:\", err);\n      const nuevosErrores = { ...ErroresTotales\n      };\n      err.inner.forEach(error => {\n        nuevosErrores[error.path] = [error.message];\n      });\n      setErrores(nuevosErrores);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"salida_id\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Estacion de salida\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 44\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"salida_id\",\n        name: \"salida_id\",\n        placeholder: \"Estacion de salida\",\n        className: \"form-control\",\n        value: viaje.salida_id,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), errores.salida_id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errores.salida_id[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"empresa_id\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Empresa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"form-control\",\n        id: \"empresa_id\",\n        value: viaje.empresa_id,\n        onChange: handleChange,\n        type: \"text\",\n        name: \"empresa_id\",\n        children: viajes.map(empresa => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: viaje.empresa_id,\n          children: empresa.nombre\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this), errores.empresa_id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errores.empresa_id[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"destino_id\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Estacion de destino\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"destino_id\",\n        name: \"destino_id\",\n        placeholder: \"Estacion de salida\",\n        className: \"form-control\",\n        value: viaje.destino_id,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), errores.destino_id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errores.destino_id[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fecha_salida\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Fecha de salida\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 48\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"fecha_salida\",\n        type: \"date\",\n        name: \"fecha_salida\",\n        value: viaje.fecha_salida,\n        className: \"form-control\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }, this), errores.fecha_salida ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errores.fecha_salida[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fecha_llegada\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Fecha de llegada\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        id: \"fecha_llegada\",\n        type: \"date\",\n        name: \"fecha_llegada\",\n        value: viaje.fecha_llegada,\n        className: \"form-control\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }, this), errores.fecha_llegada ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errores.fecha_llegada[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"precio\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Precio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"precio\",\n        name: \"precio\",\n        placeholder: \"Precio del pasaje\",\n        className: \"form-control\",\n        value: viaje.precio,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this), errores.precio ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: errores.precio[0]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 25\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"asientos\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Cantidad asientos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"asientos\",\n        name: \"asientos\",\n        className: \"form-control\",\n        value: viaje.cantidad_asientos,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary button-grabar\",\n      disabled: cargando,\n      children: cargando ? /*#__PURE__*/_jsxDEV(Cargando, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 110\n      }, this) : 'Grabar'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 13\n  }, this);\n}\n\n_s(CargarViaje, \"El1lWCqb2D95k+rag4Xs4sborDo=\", false, function () {\n  return [useHistory];\n});\n\n_c = CargarViaje;\nexport default CargarViaje;\n\nvar _c;\n\n$RefreshReg$(_c, \"CargarViaje\");","map":{"version":3,"sources":["C:/xampp/htdocs/front-andiamo/src/components/CargarViaje.js"],"names":["React","useState","viajesService","Cargando","useHistory","TextField","yup","validateSchema","object","shape","salida_id","number","typeError","destino_id","fecha_salida","date","fecha_llegada","precio","CargarViaje","props","useEffect","data","indexSelectEmpresa","setViajes","setCargando","catch","err","console","log","history","ErroresTotales","empresa_id","cantidad_asientos","errores","setErrores","viaje","cargando","handleChange","ev","target","name","value","handleSubmit","preventDefault","validate","abortEarly","then","store","rta","errors","notExitosa","push","e","error","nuevosErrores","inner","forEach","path","message","viajes","map","empresa","nombre"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport viajesService from \"./../services/viajes\";\r\nimport Cargando from \"./Cargando\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport * as yup from \"yup\";\r\n\r\nconst validateSchema = yup.object().shape({\r\n    \r\n   /*  empresa_id: yup.number().typeError('La empresa no puede estar vacia'), */\r\n    salida_id: yup.number().typeError('La salida no puede estar vacia'),\r\n    destino_id: yup.number().typeError('El destino no puede estar vacio'),\r\n    fecha_salida: yup.date().typeError('La fecha de salida no puede estar vacia'),\r\n    fecha_llegada: yup.date().typeError('La fecha de llegada no puede estar vacia'),\r\n    precio: yup.number().typeError('El precio no puede estar vacio'),\r\n});\r\n\r\nfunction CargarViaje(props) {\r\n\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const data = await viajesService.indexSelectEmpresa();\r\n            setViajes(data);\r\n            setCargando(false);\r\n        })().catch(err => console.log(\"Error al traer los viajes: \", err));\r\n    }, []); \r\n\r\n\r\n    const history = useHistory();\r\n    const ErroresTotales = {\r\n        empresa_id: null,\r\n        salida_id: null,\r\n        destino_id: null,\r\n        fecha_salida:null,\r\n        fecha_llegada:null,\r\n        cantidad_asientos:null,\r\n        precio:null,\r\n        \r\n    }\r\n\r\n    const [errores, setErrores] = useState({ErroresTotales});\r\n    const[viaje, setViajes] = useState({\r\n        empresa_id: \"\",\r\n        salida_id: \"\",\r\n        destino_id: \"\",\r\n        fecha_salida:\"\",\r\n        fecha_llegada:\"\",\r\n        cantidad_asientos:\"20\",\r\n        precio:\"\"\r\n\r\n    });\r\n\r\n    const [cargando, setCargando] = useState(false);\r\n    const handleChange = ev => {\r\n        \r\n        setViajes({\r\n            ...viaje,\r\n            \r\n            [ev.target.name]: ev.target.value\r\n        });\r\n    };\r\n\r\n    const handleSubmit = ev =>{\r\n        ev.preventDefault();\r\n\r\n        validateSchema\r\n            .validate(viaje, {\r\n                abortEarly: false \r\n            })\r\n\r\n            .then(data => {\r\n                \r\n        setCargando(true);\r\n\r\n        viajesService.store(viaje)\r\n            .then(rta => {\r\n                setViajes({\r\n                    empresa_id: '',\r\n                    salida_id: '',\r\n                    destino_id: '',\r\n                    fecha_salida:'',\r\n                    fecha_llegada:'',\r\n                    cantidad_asientos:'',\r\n                    precio:''\r\n                });\r\n                setCargando(false);\r\n                \r\n                if(!rta.errors){\r\n                    console.log(\"Viaje creado con éxito\" , rta);\r\n                    setErrores({ErroresTotales });\r\n\r\n                } else {\r\n                    setErrores(rta.errors);\r\n                }\r\n\r\n                if(typeof props.notExitosa === \"function\") {\r\n                    props.notExitosa({\r\n                        ...rta.data\r\n                    });\r\n                }\r\n                \r\n                history.push('/viajes'); \r\n              \r\n            })\r\n            .catch(e => console.error('Error al crear el viaje'))\r\n            })\r\n\r\n            .catch(err => {\r\n                console.log(\"Error de validacion:\", err)\r\n\r\n                const nuevosErrores = {...ErroresTotales};\r\n               \r\n                err.inner.forEach((error) => {\r\n                    nuevosErrores[error.path] = [error.message];\r\n                });\r\n                \r\n                setErrores(nuevosErrores);\r\n            });\r\n\r\n            \r\n\r\n    };\r\n\r\n    \r\n    return (<form onSubmit={handleSubmit}>\r\n            \r\n\r\n           {/*  <div className=\"form-group\">\r\n                <label htmlFor=\"empresa_id\"><b>Empresa</b></label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"empresa_id\"\r\n                    name=\"empresa_id\"\r\n                    placeholder=\"Tendra que poner el número 1 que le corresponde a Ruta Atlántica\"\r\n                    className=\"form-control\"\r\n                    value={viaje.empresa_id}\r\n                    onChange={handleChange}\r\n                />\r\n                {\r\n                    errores.empresa_id ? (\r\n                        <div className=\"alert alert-danger\">{errores.empresa_id[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div> */}\r\n            \r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"salida_id\"><b>Estacion de salida</b></label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"salida_id\"\r\n                    name=\"salida_id\"\r\n                    placeholder=\"Estacion de salida\"\r\n                    className=\"form-control\"\r\n                    value={viaje.salida_id}\r\n                    onChange={handleChange}\r\n                />\r\n                {\r\n                    errores.salida_id ? (\r\n                        <div className=\"alert alert-danger\">{errores.salida_id[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"empresa_id\"><b>Empresa</b></label>\r\n                <select className=\"form-control\" \r\n                        id=\"empresa_id\"\r\n                        value={viaje.empresa_id}\r\n                        onChange={handleChange}\r\n                        type=\"text\"\r\n                        name=\"empresa_id\">\r\n\r\n                    {viajes.map(empresa => (\r\n                        <option value={viaje.empresa_id}>{empresa.nombre}</option> \r\n                    ))}\r\n\r\n                </select>\r\n                {\r\n                    errores.empresa_id ? (\r\n                        <div className=\"alert alert-danger\">{errores.empresa_id[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"destino_id\"><b>Estacion de destino</b></label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"destino_id\"\r\n                    name=\"destino_id\"\r\n                    placeholder=\"Estacion de salida\"\r\n                    className=\"form-control\"\r\n                    value={viaje.destino_id}\r\n                    onChange={handleChange}\r\n                />\r\n                {\r\n                    errores.destino_id ? (\r\n                        <div className=\"alert alert-danger\">{errores.destino_id[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div>\r\n\r\n             <div className=\"form-group\">\r\n                 <label htmlFor=\"fecha_salida\"><b>Fecha de salida</b></label>\r\n                    <TextField\r\n                            id=\"fecha_salida\"\r\n                            type=\"date\"\r\n                            name=\"fecha_salida\"\r\n                            value={viaje.fecha_salida}\r\n                            className=\"form-control\"\r\n                            onChange={handleChange}\r\n                        />\r\n                        {\r\n                    errores.fecha_salida ? (\r\n                        <div className=\"alert alert-danger\">{errores.fecha_salida[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div> \r\n\r\n            <div className=\"form-group\">\r\n                 <label htmlFor=\"fecha_llegada\"><b>Fecha de llegada</b></label>\r\n                    <TextField\r\n                            id=\"fecha_llegada\"\r\n                            type=\"date\"\r\n                            name=\"fecha_llegada\"\r\n                            value={viaje.fecha_llegada}\r\n                            className=\"form-control\"\r\n                            onChange={handleChange}\r\n                            \r\n                        />\r\n\r\n{\r\n                    errores.fecha_llegada ? (\r\n                        <div className=\"alert alert-danger\">{errores.fecha_llegada[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div> \r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"precio\"><b>Precio</b></label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"precio\"\r\n                    name=\"precio\"\r\n                    placeholder=\"Precio del pasaje\"\r\n                    className=\"form-control\"\r\n                    value={viaje.precio}\r\n                    onChange={handleChange}\r\n                />\r\n                {\r\n                    errores.precio ? (\r\n                        <div className=\"alert alert-danger\">{errores.precio[0]}</div>\r\n                    ) : null\r\n                }\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label htmlFor=\"asientos\"><b>Cantidad asientos</b></label>\r\n                <input\r\n                    type=\"text\"\r\n                    id=\"asientos\"\r\n                    name=\"asientos\"\r\n                    className=\"form-control\"\r\n                    value={viaje.cantidad_asientos}\r\n                    onChange={handleChange}\r\n                />\r\n                \r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-primary button-grabar\"  disabled={cargando}>{cargando ? <Cargando/> : 'Grabar'}</button>\r\n\r\n    </form>);\r\n}\r\n\r\nexport default CargarViaje;"]},"metadata":{},"sourceType":"module"}