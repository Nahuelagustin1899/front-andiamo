{"ast":null,"code":"import React from 'react';\nimport { API, FETCH_HEADERS } from \"../constants\";\nlet userData = {\n  id: null,\n  rol: null,\n  email: null,\n  name: null,\n  logo: null\n};\n\nif (localStorage.getItem('user') !== null) {\n  userData = JSON.parse(localStorage.getItem('user'));\n}\n\nconst AuthContext = /*#__PURE__*/React.createContext({\n  user: userData,\n\n  updateAuthData(data) {}\n\n});\nAuthContext.displayName = \"AuthContext\";\nconst authService = {\n  async login(credenciales) {\n    const rta = await fetch(API + '/auth/login', {\n      headers: FETCH_HEADERS,\n      method: 'post',\n      body: JSON.stringify(credenciales),\n      credentials: \"include\",\n      mode: 'no-cors'\n    });\n    const respuesta = await rta.json();\n\n    if (respuesta.success) {\n      userData = respuesta.user;\n      localStorage.setItem('user', JSON.stringify(userData));\n      return { ...userData\n      };\n    }\n\n    return false;\n  },\n\n  async logout() {\n    const rta = await fetch(API + '/auth/logout', {\n      headers: FETCH_HEADERS,\n      method: 'post',\n      credentials: \"include\"\n    });\n    const respuesta = await rta.json();\n\n    if (respuesta.success) {\n      userData = {\n        id: null,\n        rol: null,\n        email: null,\n        name: null,\n        logo: null\n      };\n      localStorage.removeItem('user');\n      return true;\n    }\n\n    return false;\n  },\n\n  getUserData() {\n    return { ...userData\n    };\n  }\n\n};\nexport default authService;\nexport { AuthContext };","map":{"version":3,"sources":["C:/xampp/htdocs/front-andiamo/src/services/auth.js"],"names":["React","API","FETCH_HEADERS","userData","id","rol","email","name","logo","localStorage","getItem","JSON","parse","AuthContext","createContext","user","updateAuthData","data","displayName","authService","login","credenciales","rta","fetch","headers","method","body","stringify","credentials","mode","respuesta","json","success","setItem","logout","removeItem","getUserData"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,GAAR,EAAaC,aAAb,QAAiC,cAAjC;AAEA,IAAIC,QAAQ,GAAG;AACXC,EAAAA,EAAE,EAAE,IADO;AAEXC,EAAAA,GAAG,EAAE,IAFM;AAGXC,EAAAA,KAAK,EAAE,IAHI;AAIXC,EAAAA,IAAI,EAAC,IAJM;AAKXC,EAAAA,IAAI,EAAC;AALM,CAAf;;AAQA,IAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,MAAiC,IAApC,EAA0C;AACtCP,EAAAA,QAAQ,GAAGQ,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AACH;;AAGD,MAAMG,WAAW,gBAAGb,KAAK,CAACc,aAAN,CAAoB;AACpCC,EAAAA,IAAI,EAAEZ,QAD8B;;AAEpCa,EAAAA,cAAc,CAACC,IAAD,EAAO,CAAE;;AAFa,CAApB,CAApB;AAMAJ,WAAW,CAACK,WAAZ,GAA0B,aAA1B;AAEA,MAAMC,WAAW,GAAG;AAEhB,QAAMC,KAAN,CAAYC,YAAZ,EAA0B;AACtB,UAAMC,GAAG,GAAG,MAAMC,KAAK,CAACtB,GAAG,GAAG,aAAP,EAAsB;AACzCuB,MAAAA,OAAO,EAAEtB,aADgC;AAEzCuB,MAAAA,MAAM,EAAE,MAFiC;AAGzCC,MAAAA,IAAI,EAAEf,IAAI,CAACgB,SAAL,CAAeN,YAAf,CAHmC;AAKzCO,MAAAA,WAAW,EAAE,SAL4B;AAMzCC,MAAAA,IAAI,EAAE;AANmC,KAAtB,CAAvB;AAQA,UAAMC,SAAS,GAAG,MAAMR,GAAG,CAACS,IAAJ,EAAxB;;AACA,QAAGD,SAAS,CAACE,OAAb,EAAsB;AAElB7B,MAAAA,QAAQ,GAAG2B,SAAS,CAACf,IAArB;AAEAN,MAAAA,YAAY,CAACwB,OAAb,CAAqB,MAArB,EAA6BtB,IAAI,CAACgB,SAAL,CAAexB,QAAf,CAA7B;AACA,aAAO,EAAC,GAAGA;AAAJ,OAAP;AACH;;AACD,WAAO,KAAP;AACH,GApBe;;AAsBhB,QAAM+B,MAAN,GAAe;AACX,UAAMZ,GAAG,GAAG,MAAMC,KAAK,CAACtB,GAAG,GAAG,cAAP,EAAuB;AAC1CuB,MAAAA,OAAO,EAAEtB,aADiC;AAE1CuB,MAAAA,MAAM,EAAE,MAFkC;AAG1CG,MAAAA,WAAW,EAAE;AAH6B,KAAvB,CAAvB;AAKA,UAAME,SAAS,GAAG,MAAMR,GAAG,CAACS,IAAJ,EAAxB;;AACA,QAAGD,SAAS,CAACE,OAAb,EAAsB;AAClB7B,MAAAA,QAAQ,GAAG;AACPC,QAAAA,EAAE,EAAE,IADG;AAEPC,QAAAA,GAAG,EAAE,IAFE;AAGPC,QAAAA,KAAK,EAAE,IAHA;AAIPC,QAAAA,IAAI,EAAE,IAJC;AAKPC,QAAAA,IAAI,EAAC;AALE,OAAX;AAOAC,MAAAA,YAAY,CAAC0B,UAAb,CAAwB,MAAxB;AACA,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GAzCe;;AA4ChBC,EAAAA,WAAW,GAAG;AACV,WAAO,EAAC,GAAGjC;AAAJ,KAAP;AACH;;AA9Ce,CAApB;AAiDA,eAAegB,WAAf;AAEA,SAAQN,WAAR","sourcesContent":["import React from 'react';\r\nimport {API, FETCH_HEADERS} from \"../constants\";\r\n\r\nlet userData = {\r\n    id: null,\r\n    rol: null,\r\n    email: null,\r\n    name:null,\r\n    logo:null\r\n};\r\n\r\nif(localStorage.getItem('user') !== null) {\r\n    userData = JSON.parse(localStorage.getItem('user'));\r\n}\r\n\r\n\r\nconst AuthContext = React.createContext({\r\n    user: userData,\r\n    updateAuthData(data) {}\r\n});\r\n\r\n\r\nAuthContext.displayName = \"AuthContext\";\r\n\r\nconst authService = {\r\n  \r\n    async login(credenciales) {\r\n        const rta = await fetch(API + '/auth/login', {\r\n            headers: FETCH_HEADERS,\r\n            method: 'post',\r\n            body: JSON.stringify(credenciales),\r\n         \r\n            credentials: \"include\",\r\n            mode: 'no-cors'\r\n        });\r\n        const respuesta = await rta.json();\r\n        if(respuesta.success) {\r\n        \r\n            userData = respuesta.user;\r\n           \r\n            localStorage.setItem('user', JSON.stringify(userData));\r\n            return {...userData}; \r\n        }\r\n        return false;\r\n    },\r\n\r\n    async logout() {\r\n        const rta = await fetch(API + '/auth/logout', {\r\n            headers: FETCH_HEADERS,\r\n            method: 'post',\r\n            credentials: \"include\"\r\n        });\r\n        const respuesta = await rta.json();\r\n        if(respuesta.success) {\r\n            userData = {\r\n                id: null,\r\n                rol: null,\r\n                email: null,\r\n                name: null,\r\n                logo:null,\r\n            };\r\n            localStorage.removeItem('user');\r\n            return true; \r\n        }\r\n        return false;\r\n    },\r\n\r\n    \r\n    getUserData() {\r\n        return {...userData};\r\n    }\r\n};\r\n\r\nexport default authService;\r\n\r\nexport {AuthContext};\r\n"]},"metadata":{},"sourceType":"module"}